<local:ToolPanelControl
    x:Class="IRExplorerUI.ModuleReportPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:IRExplorerUI"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <local:ToolPanelControl.CommandBindings>
    </local:ToolPanelControl.CommandBindings>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="28" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <DockPanel
            Grid.Row="0"
            HorizontalAlignment="Stretch"
            Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
            <ToolBarTray
                Grid.Row="0"
                Grid.Column="2"
                Height="28"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top"
                Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}"
                IsLocked="True">
                <ToolBar
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Top"
                    Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}"
                    Loaded="ToolBar_Loaded">
                    <TextBlock
                        Margin="5,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Text="Filter" />

                    <ToggleButton
                        IsChecked="{Binding SearchPanelVisible, Mode=TwoWay}"
                        TabIndex="5"
                        ToolTip="Search output text (Ctrl+F)">
                        <Image
                            Width="16"
                            Height="16"
                            Source="{StaticResource SearchIcon}" />
                    </ToggleButton>

                </ToolBar>
            </ToolBarTray>

            <local:PanelToolbarTray
                DockPanel.Dock="Right"
                HasDuplicateButton="False"
                HasPinButton="False" />
        </DockPanel>
        <Grid Grid.Row="1" Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
            <StackPanel>
                <Expander Header="Summary" IsExpanded="True">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Margin="4,4,16,4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Functions" Width="100"  FontWeight="DemiBold"/>
                                <TextBlock Text="{Binding FunctionCount}"  FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Single caller" Width="100"  Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding SingleCallerFunctions.Count}"/>
                                <TextBlock Text="{Binding SingleCallerPercentage}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Leafs" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding LeafFunctions.Count}"/>
                                <TextBlock Text="{Binding LeafPercentage}"/>
                            </StackPanel>
                            <Separator Margin="0,4,0,4"/>
                            
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Calls per function" MinWidth="100"  FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Average" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Calls.Average}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Median" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Calls.Median}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Min" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Calls.Min}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Max" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Calls.Max}"/>
                            </StackPanel>
                            <Separator Margin="0,4,0,4"/>

                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Callers per function" MinWidth="100"  FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Average" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Callers.Average}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Median" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Callers.Median}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Min" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Callers.Min}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Max" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Callers.Max}"/>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="4">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Size (total)" Width="100"  FontWeight="DemiBold"/>
                                <TextBlock Text="{Binding Statistics.Total.Size}"  FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <TextBlock Text="Size per function" MinWidth="100" FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Average" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Size.Average}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Median" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Size.Median}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Min" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Size.Min}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Max" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Size.Max}"/>
                            </StackPanel>
                            <Separator/>

                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Instructions (total)" Width="100"  FontWeight="DemiBold"/>
                                <TextBlock Text="{Binding Statistics.Total.Instructions}"  FontWeight="DemiBold"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <TextBlock Text="Instructions per function" MinWidth="100"  FontWeight="DemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Average" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Instructions.Average}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Median" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Instructions.Median}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Min" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Instructions.Min}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Max" Width="100" Margin="16,0,0,0"/>
                                <TextBlock Text="{Binding Statistics.Instructions.Max}"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Expander>
                <Expander Header="Instructions details">
                    <StackPanel  Margin="4,4,16,4">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Instructions by type (total)" MinWidth="100"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Loads" Width="100"  Margin="16,0,0,0"/>
                            <TextBlock Text="{Binding Statistics.Total.Loads}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Stores" Width="100"  Margin="16,0,0,0"/>
                            <TextBlock Text="{Binding Statistics.Total.Stores}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Branches" Width="100"  Margin="16,0,0,0"/>
                            <TextBlock Text="{Binding Statistics.Total.Branches}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Calls" Width="100"  Margin="16,0,0,0"/>
                            <TextBlock Text="{Binding Statistics.Total.Calls}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Indirect calls" Width="100"  Margin="16,0,0,0"/>
                            <TextBlock Text="{Binding Statistics.Total.IndirectCalls}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>
                <Expander Header="Size details"/>
                <Expander Header="Calls details"/>
                <Expander Header="Callers details"/>
                <Expander Header="Single caller functions"/>
                <Expander Header="Leaf functions"/>
            </StackPanel>
        </Grid>
    </Grid>
</local:ToolPanelControl>