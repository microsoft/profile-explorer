<client:ToolPanelControl
    x:Class="IRExplorerUI.Profile.CallTreeNodePanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:client="clr-namespace:IRExplorerUI"
    xmlns:controls="clr-namespace:IRExplorerUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:doc="clr-namespace:IRExplorerUI.Document"
    xmlns:local="clr-namespace:IRExplorerUI.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:profile="clr-namespace:IRExplorerUI.Profile"
    d:DesignHeight="450"
    d:DesignWidth="800"
    SnapsToDevicePixels="True"
    UseLayoutRounding="True"
    mc:Ignorable="d">
    <Grid HorizontalAlignment="Stretch" Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
        <StackPanel
            Margin="2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Top">
            <StackPanel Orientation="Horizontal">
                <TextBlock
                    Width="70"
                    VerticalAlignment="Center"
                    Text="Time (total)" />

                <ContentControl
                    MinWidth="150"
                    HorizontalAlignment="Stretch"
                    Content="{Binding Node}"
                    ContentTemplate="{StaticResource ProfilePercentageTemplate}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Width="70" Text="Time (self)" />
                <ContentControl
                    MinWidth="150"
                    HorizontalAlignment="Stretch"
                    Content="{Binding Node}"
                    ContentTemplate="{StaticResource ProfileExclusivePercentageTemplate}" />
            </StackPanel>
        </StackPanel>

        <TabControl
            Margin="0,40,0,0"
            Padding="2"
            HorizontalAlignment="Stretch"
            Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
            <TabItem
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                Header="Info">
                <ScrollViewer
                    HorizontalAlignment="Stretch"
                    HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto">
                    <StackPanel MaxWidth="{Binding ActualWidth, ElementName=ContentHost}" Margin="0,4,0,0">
                        <TextBlock
                            Margin="4,0,0,0"
                            FontWeight="DemiBold"
                            Text="Instances" />


                        <StackPanel Margin="4,2,0,0" Orientation="Horizontal">
                            <TextBlock Width="70" Text="Total number" />
                            <TextBlock Margin="4,0,0,0" Text="{Binding FunctionInstancesCount}" />
                        </StackPanel>


                        <StackPanel Margin="4,2,0,0" Orientation="Horizontal">
                            <TextBlock Width="70" Text="All instances" />
                            <ContentControl
                                Width="200"
                                HorizontalAlignment="Left"
                                Content="{Binding InstancesNode}"
                                ContentTemplate="{StaticResource ProfileCombinedPercentageTemplate}" />
                        </StackPanel>



                        <StackPanel Margin="4,2,0,0" Orientation="Horizontal">
                            <TextBlock Width="70" Text="This instance" />
                            <ContentControl
                                Width="200"
                                HorizontalAlignment="Left"
                                Content="{Binding ThisInstanceNode}"
                                ContentTemplate="{StaticResource ProfileCombinedPercentageTemplate}" />
                        </StackPanel>


                        <TextBlock
                            Margin="4,12,0,0"
                            HorizontalAlignment="Left"
                            FontWeight="DemiBold"
                            Text="Module" />
                        <TextBox
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}"
                            IsReadOnly="True"
                            MaxLines="3"
                            ScrollViewer.CanContentScroll="True"
                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                            Text="{Binding Path=Node.ModuleName}"
                            TextWrapping="Wrap" />

                        <TextBlock
                            Margin="4,4,0,0"
                            HorizontalAlignment="Left"
                            FontWeight="DemiBold"
                            Text="Function name" />
                        <TextBox
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}"
                            IsReadOnly="True"
                            ScrollViewer.CanContentScroll="True"
                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                            ScrollViewer.VerticalScrollBarVisibility="Auto"
                            Text="{Binding Path=Node.FullFunctionName}"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Header="Backtrace"
                ToolTip="Reverse call stack for selected function">
                <profile:ProfileListView
                    x:Name="BacktraceList"
                    NameColumnTitle="Function"
                    ShowModuleColumn="True"
                    TimeColumnTitle="Time" />
            </TabItem>

            <TabItem
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Header="Functions"
                ToolTip="Self time per functions under selected function">
                <profile:ProfileListView
                    x:Name="FunctionList"
                    NameColumnTitle="Function"
                    ShowModuleColumn="True"
                    TimeColumnTitle="Time" />
            </TabItem>
            <TabItem
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Header="Modules"
                ToolTip="Self time per functions under selected function">
                <profile:ProfileListView
                    x:Name="ModuleList"
                    ExclusiveTimeColumnTitle="Time"
                    NameColumnTitle="Module" />
            </TabItem>
        </TabControl>


        <controls:ResizeGrip
            x:Name="PanelResizeGrip"
            Width="16"
            Height="16"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Panel.ZIndex="100" />
    </Grid>
</client:ToolPanelControl>